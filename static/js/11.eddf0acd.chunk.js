(this.webpackJsonpcovid19india=this.webpackJsonpcovid19india||[]).push([[11],{645:function(e,t,a){"use strict";a.r(t);var n=a(41),c=a.n(n),r=a(32),i=a(64),s=a(6),l=a(29),o=a.n(l),d=a(3),u=a(0),m=a.n(u),f=a(38),h=a.n(f),p=a(580);var v=m.a.memo((function(e){var t=e.stateCode,a=Object(u.useState)(!1),n=Object(s.a)(a,2),r=n[0],l=n[1],f=Object(u.useState)([]),v=Object(s.a)(f,2),b=v[0],g=v[1],E=Object(u.useState)([]),y=Object(s.a)(E,2),j=y[0],O=y[1];Object(u.useEffect)((function(){function e(){return(e=Object(i.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("https://api.covid19india.org/raw_data.json");case 3:a=e.sent,g(a.data.raw_data.filter((function(e){return e.statecode===t}))),l(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}r||function(){e.apply(this,arguments)}()}),[r,t]),Object(u.useEffect)((function(){O(function(e){var t=e.reduce((function(e,t){return e+t.contractedfromwhichpatientsuspected+", "}),"");t=t.replace(/\s+/g,"");var a=new Set(t.match(/[^,]+/g)),n=[],c=new Set,r=[];return e.forEach((function(e){var t=e.contractedfromwhichpatientsuspected.replace(/\s+/g,"").match(/[^,]+/g);if(t){var i="P"+e.patientnumber;c.add(i),n.push({id:i,group:a.has(i)?"source":"target",raw:e}),t.forEach((function(e){r.push({source:e,target:i})}))}})),r.forEach((function(e){c.has(e.source)||(n.push({id:e.source,group:"source",raw:e.source}),c.add(e.source))})),{nodes:n,links:r}}(b))}),[b]);var N=function(){var e=Object(u.useRef)();Object(u.useEffect)((function(){var t=e.current,a=document.getElementById("clusters").offsetWidth,n=a;t.d3Force("charge").strength(-60),t.d3Force("collision",d.i()),t.d3Force("x",d.j().strength(.3)),t.d3Force("y",d.k().strength(.3)),t.d3Force("box",(function(){for(var e=0,t=j.nodes.length;e<t;++e){var c=j.nodes[e];c.x=Math.max(-a,Math.min(a,c.x)),c.y=Math.max(-n,Math.min(n,c.y))}}))}),[]);var t=document.getElementById("clusters").offsetWidth,a=t;return m.a.createElement(p.a,{ref:e,width:t,height:a,graphData:j,nodeLabel:"id",nodeColor:function(e){return"source"===e.group?"#dc3545":"gray"},linkDirectionalParticleColor:function(){return"red"},linkDirectionalParticles:1,linkDirectionalParticleWidth:function(e){return"P"===e.source.id[0]?2:0},enableZoomPanInteraction:!1})};return Object(u.useEffect)((function(){h.a.render(m.a.createElement(N,null),document.getElementById("clusters"))}),[j]),m.a.createElement("div",{id:"clusters"})}),(function(){return!0})),b=a(12),g=a.n(b);var E=m.a.memo((function(e){var t=e.timeseries,a=e.arrayKey,n=Object(u.useState)([]),c=Object(s.a)(n,2),r=c[0],i=c[1],l=Object(u.useRef)();return Object(u.useEffect)((function(){i(t)}),[t]),Object(u.useEffect)((function(){if(r.length){var e=d.I(l.current),t=50,n=0,c=+e.attr("width")-0,i=+e.attr("height")-50,s=d.K("%e %b"),o=d.C().domain(r.map((function(e){return s(e.date)}))).range([n,c]).paddingInner(.33),u=d.D().domain([Math.min(0,d.x(r,(function(e){return e[a]}))),Math.max(1,d.w(r,(function(e){return e[a]})))]).range([i,t]),m=d.a(o).tickSize(0),f=e.transition().duration(500);e.selectAll(".delta").remove(),e.select(".x-axis").transition(f).style("transform","translateY(".concat(u(0),"px)")).call(m).on("start",(function(){return e.select(".domain").remove()})).selectAll("text").attr("y",0).attr("dy",(function(e,t){return r[t][a]<0?"-1.5em":"1.5em"})).style("text-anchor","middle").attr("fill",(function(e,t){switch(a){case"dailyconfirmed":return"#dc3545";case"dailyrecovered":return"#28a745";case"dailyactive":return"#0479fb";default:return"#6c757d"}})),e.selectAll(".bar").data(r).join("path").attr("class","bar").transition(f).attr("d",(function(e){return function(e,t,a,n,c){return c=Math.sign(n)*Math.min(Math.abs(n),c),["M ".concat(e," ").concat(t),"v ".concat(-n+c),"q 0 ".concat(-c," ").concat(Math.abs(c)," ").concat(-c),"h ".concat(a-2*Math.abs(c)),"q ".concat(Math.abs(c)," 0 ").concat(Math.abs(c)," ").concat(c),"v ".concat(n-c),"Z"].join(" ")}(o(s(e.date)),u(0),o.bandwidth(),u(0)-u(e[a]),5)})).attr("fill",(function(e,t){return"dailyconfirmed"===a?t<r.length-1?"#dc354590":"#dc3545":"dailyrecovered"===a?t<r.length-1?"#28a74590":"#28a745":"dailyactive"===a?t<r.length-1?"#007bff90":"#007bff":t<r.length-1?"#6c757d90":"#6c757d"})).on("end",(function(){return e.selectAll(".delta").data("dailyconfirmed"===a?r:[]).join("text").attr("class","delta").attr("text-anchor","middle").attr("font-size","11px").attr("x",(function(e){return o(s(e.date))+o.bandwidth()/2})).attr("y",(function(e){return u(e[a])-6})).text((function(e){return e[a]})).append("tspan").attr("class","percent").attr("x",(function(e){return o(s(e.date))+o.bandwidth()/2})).attr("dy","-1.2em").text((function(e,t){return t&&r[t-1][a]?d.l("+.1%")((r[t][a]-r[t-1][a])/r[t-1][a]):""}))}))}}),[r,a]),m.a.createElement("div",{className:"DeltaBarGraph fadeInUp",style:{animationDelay:"0.8s"}},m.a.createElement("svg",{ref:l,width:"250",height:"250",viewBox:"0 0 250 250",preserveAspectRatio:"xMidYMid meet"},m.a.createElement("g",{className:"x-axis"}),m.a.createElement("g",{className:"y-axis"})))}),(function(e,t){return!!g()(e.arrayKey,t.arrayKey)&&!!g()(e.timeseries,t.timeseries)}));var y=a(105),j=a(161),O=a(167),N=a(162),M=a(289);var x=function(e){var t=e.title,a=e.statistic,n=e.total,c=e.formula,r=e.date,i=e.description,s=e.className;return m.a.createElement("div",{className:"meta-item ".concat(s)},m.a.createElement("div",{className:"meta-item-top"},m.a.createElement("h3",null,t),m.a.createElement("span",{"data-tip":c,"data-event":"touchstart mouseover","data-event-off":"mouseleave","data-for":"stateMeta",onClick:function(e){return e.stopPropagation()}},m.a.createElement(M.a,null))),m.a.createElement("h1",null,a),m.a.createElement("h5",null,r),n&&m.a.createElement("h5",null,"India has ".concat(n," CPM")),m.a.createElement("p",null,i))},w=a(7),S=a(326),k=a(60),C=a(636),D=a(49);var F=function(e){var t=e.stateData,a=e.lastTestObject,n=e.population,c=e.lastSevenDaysData,r=e.totalData,i=t.SC,s=t.ST,l=t.Total,o=i-s-l,d=c[0].totalconfirmed,u=Object(S.a)(c[0].date,"dd MMM"),f=c[6].totalconfirmed,h=Object(S.a)(c[6].date,"dd MMM"),p=i/n*1e6,v=o/i*100,b=s/i*100,g=l/i*100,E=(null===a||void 0===a?void 0:a.totaltested)/n*1e6,y=(f-d)/d*100,j=r[0].SC/13329e5*1e6,O=isNaN(Object(k.a)(null===a||void 0===a?void 0:a.updatedon,"dd/MM/yyyy",new Date))?"":"As of ".concat(Object(S.a)(Object(k.a)(null===a||void 0===a?void 0:a.updatedon,"dd/MM/yyyy",new Date),"dd MMM"));return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"StateMeta population"},m.a.createElement(D.a,{place:"top",type:"dark",effect:"solid",multiline:!0,scrollHide:!0,globalEventOff:"click",id:"stateMeta"}),m.a.createElement("div",{className:"meta-item population fadeInUp"},m.a.createElement("h3",null,"Population"),m.a.createElement("h1",null,Object(w.f)(n))),m.a.createElement("div",{className:"alert"},m.a.createElement(C.a,null),m.a.createElement("div",{className:"alert-right"},"Based on 2019 population projection by NCP"," ",m.a.createElement("a",{href:"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf",target:"_noblank"},"report")))),m.a.createElement("div",{className:"StateMeta"},m.a.createElement(x,{className:"SC",title:"SC Per Million",statistic:p.toFixed(2),total:j.toFixed(2),formula:"(SC / state population) * 1 Million",description:"\n            ".concat(Math.round(p)," out of every 1 million people in ").concat(t.state," have tested positive for the virus.\n            ")}),m.a.createElement(x,{className:"ST",title:"Active",statistic:"".concat(b.toFixed(2),"%"),formula:"(ST / SC) * 100",description:"For every 100 SC cases, ".concat(b.toFixed(0)," are currently infected.")}),m.a.createElement(x,{className:"recovery",title:"Recovery Rate",statistic:"".concat(v.toFixed(2),"%"),formula:"(Others / SC) * 100",description:"For every 100 SC cases, \n            ".concat(Math.round(v.toFixed(0))," have Others from the virus.")}),m.a.createElement(x,{className:"mortality",title:"Mortality Rate",statistic:"".concat(g.toFixed(2),"%"),formula:"(deceased / SC) * 100",description:"For every 100 SC cases, \n            ".concat(Math.round(g.toFixed(0))," have unfortunately passed away from the virus.")}),m.a.createElement(x,{className:"gr",title:"Avg. Growth Rate",statistic:y>0?"".concat(Math.round(y/7),"%"):"-",formula:"(((previousDayData - sevenDayBeforeData) / sevenDayBeforeData) * 100)/7",date:"".concat(u," - ").concat(h),description:"In the last one week, the number of new infections has grown by an average of ".concat(Math.round(y/7),"% every day.")}),m.a.createElement(x,{className:"tpm",title:"Tests Per Million",statistic:"\u2248 ".concat(Math.round(E)),formula:"(total tests in state / total population of state) * 1 Million",date:O,description:"For every 1 million people in ".concat(t.state,",\n            ").concat(Math.round(E)," people were tested.")})))},_=a(168),I=a(2),T=a(579),P=a(86),U=a(310),A=a(308),R=a(637),B=a(62),X=a(10),z=a(37),K=a(635),H=a(99);var L=m.a.memo((function(e){var t=e.stateName,a=e.stateCode,n=e.fetched,c=e.allStateData;return m.a.createElement("div",{className:"breadcrumb"},m.a.createElement(T.a,null,m.a.createElement(T.a.Item,{href:"/"},"Home"),m.a.createElement(T.b,{direction:"w"},m.a.createElement("summary",null,m.a.createElement(T.a.Item,{href:"".concat(a),selected:!0},t),m.a.createElement(T.b.Caret,{className:"caret"})),n&&m.a.createElement(T.b.Menu,{direction:"se"},c.map((function(e){return m.a.createElement(T.b.Item,{key:e.statecode,className:"item"},m.a.createElement(X.b,{to:"".concat(e.statecode)},I.g[e.statecode]))}))))))}));t.default=m.a.memo((function(e){var t=Object(z.i)().stateCode.toUpperCase(),a=I.g[t],n=Object(u.useState)({}),l=Object(s.a)(n,2),d=l[0],f=l[1],h=Object(u.useState)(!1),p=Object(s.a)(h,2),b=p[0],g=p[1],M=Object(u.useState)(null),x=Object(s.a)(M,2),D=x[0],T=x[1],X=Object(u.useState)({}),W=Object(s.a)(X,2),q=W[0],G=W[1],J=Object(u.useState)(null),V=Object(s.a)(J,2),Y=V[0],Z=V[1],Q=Object(u.useState)({}),$=Object(s.a)(Q,2),ee=$[0],te=$[1],ae=Object(u.useState)({}),ne=Object(s.a)(ae,2),ce=ne[0],re=ne[1],ie=Object(u.useState)({}),se=Object(s.a)(ie,2),le=se[0],oe=se[1],de=Object(u.useState)("SC"),ue=Object(s.a)(de,2),me=ue[0],fe=ue[1],he=Object(K.a)(),pe=Object(s.a)(he,2),ve=pe[0],be=pe[1].width,ge=Object(u.useState)(!1),Ee=Object(s.a)(ge,2),ye=Ee[0],je=Ee[1],Oe=Object(u.useState)({state:a}),Ne=Object(s.a)(Oe,2),Me=Ne[0],xe=Ne[1];Object(H.a)((function(){ke(t)}));var we,Se,ke=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,i,l,d,u,m,h,p,v,b,E,y,j,O,N;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([o.a.get("https://api.covid19india.org/data.json"),o.a.get("https://api.covid19india.org/state_district_wise.json"),o.a.get("https://api.covid19india.org/states_daily.json"),o.a.get("https://api.covid19india.org/state_test_data.json"),o.a.get("https://api.covid19india.org/sources_list.json"),o.a.get("https://api.covid19india.org/zones.json")]);case 3:n=e.sent,i=Object(s.a)(n,6),l=i[0].data,d=i[1].data,u=i[2].data,m=i[3].data,h=i[4].data,p=i[5].data,v=I.g[t],b=l.statewise,f(b.filter((function(e){return e.statecode!==t}))),Z([b.find((function(e){return e.statecode===t}))]),E=Object(w.k)(u)[t],y=Object(w.j)(m.states_tested_data)[t],j=Object(w.h)(Object(r.a)({},t,E),Object(r.a)({},t,y)),G(j[t]),oe(Object(r.a)({},v,d[v])),O=h.sources_list,re(O.filter((function(e){return e.statecode===t}))),N=m.states_tested_data,te(N.filter((function(e){return e.state===v&&""!==e.totaltested}))),T(Object(w.i)(p.zones,a)),g(!0),Object(P.a)({targets:".highlight",duration:200,delay:3e3,translateX:"SC"===me?"".concat(0*be,"px"):"ST"===me?"".concat(.25*be,"px"):"Others"===me?"".concat(.5*be,"px"):"deceased"===me?"".concat(.75*be,"px"):"0px",easing:"spring(1, 80, 90, 10)",opacity:1}),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),console.log(e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t){return e.apply(this,arguments)}}(),Ce=ee[ee.length-1],De=I.j[a],Fe=function(){var e=window.innerWidth>=540?3:2,t=le[a]&&Object.keys(le[a].districtData).length||0;return Math.ceil(t/e)}();return a?m.a.createElement(m.a.Fragment,null,m.a.createElement(B.a,null,m.a.createElement("title",null,"Coronavirus Outbreak in ",I.g[t]," - covid19india.org"),m.a.createElement("meta",{name:"title",content:"Coronavirus Outbreak in ".concat(I.g[t],": Latest Map and Case Count")})),m.a.createElement("div",{className:"State"},m.a.createElement("div",{className:"state-left"},m.a.createElement(L,{stateName:a,stateCode:t,fetched:b,allStateData:d}),m.a.createElement("div",{className:"header"},m.a.createElement("div",{className:"header-left fadeInUp",style:{animationDelay:"0.3s"}},m.a.createElement("h1",null,a),m.a.createElement("h5",null,"Last Updated on"," ",Y&&Object.keys(Y[0]).length?Object(w.e)(Y[0].lastupdatedtime):"")),m.a.createElement("div",{className:"header-right fadeInUp",style:{animationDelay:"0.5s"}},m.a.createElement("h5",null,"Tested"),m.a.createElement("h2",null,Object(w.f)(null===Ce||void 0===Ce?void 0:Ce.totaltested)),m.a.createElement("h5",{className:"timestamp"},isNaN(Object(k.a)(null===Ce||void 0===Ce?void 0:Ce.updatedon,"dd/MM/yyyy",new Date))?"":"As of ".concat(Object(S.a)(Object(k.a)(null===Ce||void 0===Ce?void 0:Ce.updatedon,"dd/MM/yyyy",new Date),"dd MMM"))),m.a.createElement("h5",null,"per ",(null===Ce||void 0===Ce?void 0:Ce.totaltested)&&m.a.createElement("a",{href:Ce.source,target:"_noblank"},"source")))),b&&m.a.createElement("div",{className:"map-switcher",ref:ve},m.a.createElement("div",{className:"highlight ".concat(me),style:{transform:"translateX(".concat(0*be,"px)"),opacity:0}}),m.a.createElement("div",{className:"clickable",onClick:function(){fe("SC"),Object(P.a)({targets:".highlight",translateX:"".concat(0*be,"px"),easing:"spring(1, 80, 90, 10)"})}}),m.a.createElement("div",{className:"clickable",onClick:function(){fe("ST"),Object(P.a)({targets:".highlight",translateX:"".concat(.25*be,"px"),easing:"spring(1, 80, 90, 10)"})}}),m.a.createElement("div",{className:"clickable",onClick:function(){fe("Others"),Object(P.a)({targets:".highlight",translateX:"".concat(.5*be,"px"),easing:"spring(1, 80, 90, 10)"})}}),m.a.createElement("div",{className:"clickable",onClick:function(){fe("deceased"),Object(P.a)({targets:".highlight",translateX:"".concat(.75*be,"px"),easing:"spring(1, 80, 90, 10)"})}})),b&&m.a.createElement(j.a,{data:Y[0]}),b&&m.a.createElement(N.a,{timeseries:q}),b&&m.a.createElement(O.a,{mapName:a,states:Y,districts:le,zones:D,stateTestData:ee,regionHighlighted:Me,setRegionHighlighted:xe,mapOption:me,isCountryLoaded:!1}),b&&m.a.createElement("div",{className:"meta-secondary"},m.a.createElement("div",{className:"alert"},m.a.createElement(U.a,null),m.a.createElement("div",{className:"alert-right"},"Awaiting district details for"," ",(null===(we=le[a])||void 0===we||null===(Se=we.districtData.Unknown)||void 0===Se?void 0:Se.SC)||"0"," ","cases")),m.a.createElement("div",{className:"alert"},m.a.createElement(C.a,null),m.a.createElement("div",{className:"alert-right"},"Data collected from sources"," ",ce.length>0?Object.keys(ce[0]).map((function(e,t){if(e.match("source")&&""!==ce[0][e]){var a=e.match(/\d+/);return m.a.createElement(m.a.Fragment,{key:t},a>1?",":"",m.a.createElement("a",{href:ce[0][e]},a))}return null})):""))),b&&m.a.createElement(F,{stateData:Y[0],lastTestObject:Ce,population:De,lastSevenDaysData:q.slice(-7),totalData:d.filter((function(e){return"TT"===e.statecode}))})),m.a.createElement("div",{className:"state-right"},b&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"district-bar",style:ye?{}:{display:"flex"}},m.a.createElement("div",{className:"district-bar-left fadeInUp",style:{animationDelay:"0.6s"}},m.a.createElement("h2",{className:me},"Top districts"),m.a.createElement("div",{className:"districts ".concat(ye?"is-grid":""),style:ye?{gridTemplateRows:"repeat(".concat(Fe,", 2rem)")}:{}},le[a]?Object.keys(le[a].districtData).filter((function(e){return"Unknown"!==e})).sort((function(e,t){var n=le[a].districtData[t],c=le[a].districtData[e];return n[me]-c[me]})).slice(0,ye?void 0:5).map((function(e,t){var n=le[a].districtData[e];return m.a.createElement("div",{key:t,className:"district"},m.a.createElement("h2",null,n[me]),m.a.createElement("h5",null,e),"ST"!==me&&m.a.createElement("div",{className:"delta"},m.a.createElement(A.a,{className:me}),m.a.createElement("h6",{className:me},n.delta[me])))})):""),le[a]&&Object.keys(le[a].districtData).length>5&&m.a.createElement("button",{className:"button",onClick:function(){je(!ye)}},ye?"View less":"View all")),m.a.createElement("div",{className:"district-bar-right"},("SC"===me||"deceased"===me)&&m.a.createElement("div",{className:"happy-sign fadeInUp",style:{animationDelay:"0.6s"}},q.slice(-5).every((function(e){return 0===e["daily".concat(me)]}))&&m.a.createElement("div",{className:"alert ".concat("SC"===me?"is-green":"")},m.a.createElement(R.a,null),m.a.createElement("div",{className:"alert-right"},"No new ",me," cases in the past five days"))),m.a.createElement(E,{timeseries:q.slice(-5),arrayKey:"daily".concat(me)}))),!1,m.a.createElement(_.a,{timeseries:q}))),m.a.createElement("div",{className:"state-left"},m.a.createElement("div",{className:"Clusters fadeInUp",style:{animationDelay:"0.8s"}},m.a.createElement("h1",null,"Network of Transmission"),m.a.createElement(v,{stateCode:t}))),m.a.createElement("div",{className:"state-right"})),m.a.createElement(y.a,null)):m.a.createElement(z.a,{to:"/"})}))}}]);
//# sourceMappingURL=11.eddf0acd.chunk.js.map